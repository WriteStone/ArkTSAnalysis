# 天气应用隐私政策

更新日期：2025年11月4日  
生效日期：2025年11月4日

---

## 1. 我们如何收集和使用您的个人信息

本应用致力于保护您的隐私。我们仅在提供服务所必需的范围内收集和使用您的个人信息。

### 1.1 天气查询功能

**功能说明：** 为您提供实时天气、每小时天气预报和未来天气预报服务。

**涉及的个人信息：**
- ✅ **位置信息**（精确位置/粗略位置）
- ✅ **网络访问权限**

**使用目的：**
- 当您点击"我的位置"按钮时，我们会请求获取您的地理位置信息（经纬度）
- 将您的位置信息发送给第三方天气服务提供商（和风天气 API）以获取当地天气数据
- 获取实时天气、每小时天气预报、未来7天天气预报

**您的选择权：**
- 位置权限为**非必需权限**，您可以拒绝授权
- 拒绝后，您仍可通过手动搜索城市名称查询天气

---

### 1.2 城市管理功能

**功能说明：** 您可以搜索并添加多个城市，管理您关注的城市列表。

**涉及的个人信息：**
- ✅ **城市列表**（您添加的城市信息）
- ✅ **网络访问权限**

**使用目的：**
- 保存您添加的城市列表到本地存储
- 根据您的搜索关键词，向和风天气API请求城市搜索结果
- 为您保存的城市获取天气预报数据

**数据存储位置：**
- 您的城市列表仅保存在**本地设备**中
- 不会上传到我们的服务器或第三方服务器

**您可以随时：**
- 前往"编辑页面"添加或删除城市
- 清除应用数据将删除所有本地保存的城市列表

---

### 1.3 设置功能

**功能说明：** 您可以个性化设置应用的显示和使用偏好。

#### 1.3.1 语言设置
**涉及的个人信息：** 无
- 仅在本地保存您选择的语言偏好
- 不涉及个人敏感信息

#### 1.3.2 单位设置
**涉及的个人信息：** 无
- 支持公制（℃）和英制（℉）单位切换
- 偏好设置仅保存在本地设备

#### 1.3.3 API密钥设置
**涉及的个人信息：**
- ✅ **和风天气API密钥**（由您自行申请并填入）

**使用目的：**
- 使用您提供的API密钥访问和风天气服务
- API密钥**仅保存在本地设备**的加密存储中
- 用于身份验证，获取天气数据

**安全措施：**
- API密钥通过 Preferences 机制存储
- 不会分享给除和风天气以外的任何第三方

#### 1.3.4 高级设置
**涉及的个人信息：** 无

包括：
- 日预报请求天数（3天/7天/10天/15天/30天）
- 小时预报请求数量（24小时/72小时/168小时）
- 缓存有效期设置
- 最后更新时间记录

**说明：** 这些设置仅影响应用的数据请求行为，不涉及个人信息收集。

---

### 1.4 天气预警功能

**功能说明：** 自动获取您所在地区的天气预警信息。

**涉及的个人信息：**
- ✅ **城市信息**（您添加的城市或当前位置）

**使用目的：**
- 向和风天气API请求对应城市的天气预警信息
- 在应用首页显示预警提示

**数据来源：** 第三方天气服务提供商（和风天气）

---

## 2. 我们如何共享、转让、公开披露您的个人信息

### 2.1 共享
我们会将以下信息共享给第三方服务提供商：

| 第三方服务 | 共享的信息 | 共享目的 | 隐私政策链接 |
|-----------|-----------|---------|------------|
| 和风天气 API | 位置信息（经纬度）、城市名称 | 获取天气数据 | https://www.qweather.com/privacy |

**共享原则：**
- 仅在您主动使用相关功能时共享
- 仅共享必要的信息
- 已与第三方签订数据处理协议

### 2.2 转让
我们**不会**将您的个人信息转让给任何公司、组织或个人。

### 2.3 公开披露
我们**不会**公开披露您的个人信息。

---

## 3. 我们如何保护您的个人信息

### 3.1 数据安全措施
- ✅ 使用鸿蒙系统提供的 **Preferences** 机制加密存储敏感信息
- ✅ 网络传输使用 **HTTPS** 加密协议
- ✅ 仅在应用沙箱环境内存储数据
- ✅ 不会将数据上传到我们的服务器

### 3.2 数据最小化原则
- 仅收集实现功能所必需的信息
- 位置权限仅在用户点击"我的位置"时请求
- 不会后台收集位置信息

---

## 4. 您的权利

### 4.1 访问和管理您的信息

#### 4.1.1 查看已添加的城市
您可以随时前往：
- **主页** → 左右滑动查看所有已添加的城市
- **编辑页面** → 查看和管理城市列表

#### 4.1.2 查看API设置
您可以前往：
- **设置** → **密钥设置** → 查看当前配置的API密钥

#### 4.1.3 查看缓存数据
- **设置** → **高级设置** → 查看最后更新时间和缓存配置

### 4.2 删除您的信息

#### 4.2.1 删除单个城市
您可以：
1. 前往**编辑页面**
2. 长按城市卡片
3. 选择删除

**删除后的数据：**
- ✅ 该城市的所有天气数据（实时天气、预报、预警）
- ✅ 本地缓存的该城市数据

#### 4.2.2 清除所有本地数据
您可以通过以下方式清除所有数据：

**方式1：卸载应用**
- 卸载应用后，所有本地数据将被彻底删除，包括：
  - 所有已添加的城市列表
  - 所有天气数据缓存
  - API密钥配置
  - 个性化设置（语言、单位等）

**方式2：清除应用数据**
1. 前往系统**设置**
2. 选择**应用管理**
3. 找到**天气**应用
4. 点击**存储** → **清除数据**

**清除后包括：**
- ✅ 个人信息：城市列表
- ✅ 天气数据：实时天气、预报数据、预警信息
- ✅ 配置信息：API密钥、语言、单位设置
- ✅ 缓存数据：所有本地缓存的天气数据

### 4.3 撤回授权
您可以随时撤回位置权限授权：

1. 前往系统**设置**
2. 选择**隐私** → **权限管理**
3. 找到**天气**应用
4. 关闭**位置信息**权限

**撤回后：**
- ❌ 无法使用"我的位置"功能
- ✅ 仍可通过搜索城市名称查询天气

---

## 5. 我们如何使用 Cookie 和同类技术

本应用**不使用** Cookie 或追踪技术。

我们仅在本地使用以下存储机制：
- **Preferences**：存储用户设置和API密钥
- **AppStorage**：临时存储天气数据，用于页面显示
- **关系型数据库（RDB）**：缓存天气数据，减少网络请求

所有数据均存储在设备本地，不会上传到服务器。

---

## 6. 我们如何处理未成年人的个人信息

本应用**不针对**未成年人设计。

如果您是未成年人的监护人，且发现未成年人使用了本应用：
- 本应用收集的信息仅限于天气查询所需的位置信息
- 您可以通过清除应用数据的方式删除所有信息
- 如有疑问，请联系我们

---

## 7. 隐私政策的变更

我们可能会适时修订本隐私政策。

**重大变更时：**
- 我们会通过应用内通知的形式告知您
- 在显著位置提示您阅读更新后的隐私政策

**您的选择：**
- 如果您不同意修订后的隐私政策，可以停止使用本应用
- 继续使用本应用，视为您同意更新后的隐私政策

---

## 8. 如何联系我们

如果您对本隐私政策有任何疑问、意见或建议：

📧 **电子邮件：** dev@peercat.cn  
📝 **开源项目地址：** [GitHub - ohos-weather](https://github.com/Tingjin/ohos-weather)

我们将在 **15个工作日内** 回复您的请求。

---

## 9. 权限使用详情

| 权限名称 | 权限类型 | 使用场景 | 是否必需 | 拒绝后影响 |
|---------|---------|---------|---------|-----------|
| 位置权限（精确） | ohos.permission.LOCATION | 点击"我的位置"按钮时 | ❌ 非必需 | 无法自动定位，需手动搜索城市 |
| 位置权限（粗略） | ohos.permission.APPROXIMATELY_LOCATION | 点击"我的位置"按钮时 | ❌ 非必需 | 无法自动定位，需手动搜索城市 |
| 网络访问 | ohos.permission.INTERNET | 获取天气数据时 | ✅ 必需 | 无法获取天气数据，应用无法正常使用 |

---

## 10. 第三方服务说明

### 10.1 和风天气 API

**服务提供商：** 和风天气（北京和风天气科技有限公司）

**数据处理说明：**
- 我们会将您的位置信息（经纬度）或搜索的城市名称发送给和风天气API
- 和风天气会基于此信息返回天气数据
- 和风天气可能会记录API请求日志（包括您的IP地址、请求时间等）

**隐私政策：** https://www.qweather.com/privacy

**您的选择：**
- 您需要自行申请和风天气API密钥
- 您可以查阅和风天气的隐私政策了解其数据处理行为

---

## 11. 数据留存期限

| 数据类型 | 留存期限 | 删除方式 |
|---------|---------|---------|
| 城市列表 | 直到您删除或卸载应用 | 编辑页面手动删除 / 清除应用数据 |
| 天气数据缓存 | 根据设置的缓存有效期自动过期 | 自动过期 / 清除应用数据 |
| API密钥 | 直到您更改或删除 | 密钥设置页面清空 / 清除应用数据 |
| 个性化设置 | 直到您更改或删除 | 设置页面修改 / 清除应用数据 |
| 位置信息 | **不留存**（仅用于当次请求） | 自动清除 |

---

## 附录：技术细节（供研究参考）

### A. 数据流向图

```
用户操作 → 应用功能 → 数据收集 → 数据传输 → 数据存储

1. 点击"我的位置"
   ↓
   请求位置权限 → 获取GPS坐标 → 发送给和风API → 返回城市信息 → 存储到本地数据库

2. 搜索城市
   ↓
   输入关键词 → 发送搜索请求 → 和风API → 返回城市列表 → 临时显示（不存储）

3. 添加城市
   ↓
   选择城市 → 请求天气数据 → 和风API → 返回天气/预警/预报 → 存储到本地数据库

4. 刷新天气
   ↓
   下拉刷新 → 检查缓存有效期 → 发送请求 → 和风API → 更新本地缓存
```

### B. 代码中的隐私相关实现

| 功能 | 实现文件 | 关键代码行 |
|-----|---------|-----------|
| 位置权限请求 | libNMC/src/main/ets/api/ApiManager.ets | 第122-126行 |
| GPS定位 | libNMC/src/main/ets/api/ApiManager.ets | 第126行 |
| 本地存储API密钥 | libNMC/src/main/ets/manager/PreferenceManager.ts | 第68行 |
| 城市数据缓存 | entry/src/main/ets/pages/Index.ets | 第38-42行 |
| 网络请求 | libNMC/src/main/ets/api/TaskManager.ets | 全文件 |

---

**本隐私政策最终解释权归天气应用开发者所有。**
